# 4주차

## 신뢰성 있는 시스템에서 컨슈머 사용하기 



### 커밋된 메시지 vs 커밋된 오프셋 

- 커밋된 메시지는 프로듀서가 전송하고 모든 동기화 리플리카에 썻으므로 컨슈머가 읽을수 있는 메시지

- 컨슈머가 파티션의 특정 오프셋까지 메시지를 수신하고 처리했다는 것을 알리기 위해 카프카에 전송한 오프셋이 커밋된 오프셋 


### auto.offset.reset 

- earliest

- latest

데이터 누락을 방지, 최소화 하기 위해선 earliest 사용하지만 중복처리가 있을 수 있다. 

### enable.auto.commit

오프셋 커밋을 코드에서 직접 vs 자동으로 할 것 인지 

직접의 경우 중복처리를 코드상에서 제어할 수 있다. 

### auto.commit.interval.ms 

enable.auto.commit 연관지어서 특정 주기로 커밋한다. 빠르면 빠를수록 중복 처리를 최소화한다.

오프켓 커밋 빈도는 성능과 중복 메시지 개수 간의 트레이드 오프다.



