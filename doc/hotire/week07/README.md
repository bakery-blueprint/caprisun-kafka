# 카프카 관리 

### 카프카 토픽 네이밍 

두 개의 밑줄로 시작되는 토픽이름도 사용이 가능하지만 권장하지 않는다. 

카프카 내부적 internal 에서 사용하는 토픽을 의미한다. 

ex)'__consumer_offsets'

구두점도 권장하지 않는데, 카프카 내부이ㅡ 메트릭 네임이에서 구두점이 밑줄로 변경된다. 

ex) 'topic.1' -> 'topic_1'


- if--not-exists 를 붙여 토픽을 생성하면 중복 생성 에러를 방지할 수 있다. 


### 파티션 

파티션 개수를 줄일 수 없다. 토픽의 파티션을 삭제하면 토픽에 저장된 데이터도 삭제되기 때문이다. 

정말 원하면 토픽 자체를 삭제하고 다시 생성해야 한다. 


메시지의 키가 존재할 경우 파티션 추가가 어렵다. 

파티션 개수가 변경되면 키에 매핑되는 파티션이 달라져 컨슈머가 읽는 메시지의 순서가 바뀔수 있다. 


### 컨슈머 그룹 

그룹 정보는 구버전의 경우 주키퍼, 신버전에서는 카프카 브로커 내부에서 관리된다. 

- GROUP : 그룹의 이름
- TOPIC : 토픽 이름
- PARTITION : 파티션 ID
- CURRENT-OFFSET : 컨슈머 그룹에 의해 커밋된 토픽 파티션의 마지막 오프셋 
- LOG-END-OFFSET : 파티션에 저장된 데이터의 끝을 나타낸다. 파티션에 쓰고 클러스터에 커밋된 마지막 메시지의 오프셋 
- LAG : CURRENT-OFFSET 와 LOG-END-OFFSET의 차이를 나태낸다.
- OWNER : 현재 토픽 파티션을 소비하는 컨슈머 그룹의 멤버이다. 그룹 멤버에게 제공되는 임이의 ID이며 컨슈머의 호스트 이름은 포함하지 않는다. 






